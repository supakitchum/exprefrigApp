<!--
  Generated template for the AddItemPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar>
    <ion-title align="center" style="margin-left: 2.5rem;" *ngIf="method == 1">
      Add item
    </ion-title>
    <ion-title align="center" style="margin-left: 2.5rem;" *ngIf="method == 0">
      Edit item
    </ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <ion-icon name="md-close" style="color: white;"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content padding class="parallax-list-item">
  <ion-refresher (ionRefresh)="doRefresh($event)" style="background-color: transparent;">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-grid>
    <ion-row>
      <ion-col col-12 align="center" (click)="presentActionSheet()">
        <img src="{{ myPhoto }}" height="200" width="200">
      </ion-col>
      <ion-col col-8>
        <ion-item>
          <ion-label>อุปกรณ์ :</ion-label>
          <ion-select [(ngModel)]="itemForm.pvkey" name="pvkey" id="pvkey">
            <ion-option *ngIf="pv_key_old != null" selected="true" value="{{pv_key_old}}">{{pv_key_old}}</ion-option>
            <ion-option value="{{item.private_key}}" *ngFor="let item of key">{{item.private_key}}</ion-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col col-4>
        <button ion-button class="btn-login" style="width: 100%;" type="submit" (click)="showMyDevice()">+ เพิ่มอุปกรณ์
        </button>
      </ion-col>
      <ion-col col-12>
        <ion-item>
          <ion-label>ชื่อ :{{name}}</ion-label>
          <ion-input type="text" id="name" name="name" [(ngModel)]="itemForm.name"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col col-12>
        <ion-item>
          {{dateYellow}}
          <ion-label style="color:white;">วันใกล้หมดอายุ :</ion-label>
          <ion-datetime #yellow displayFormat="DD/MM/YYYY HH:mm" [min]="minDate" max="2050" [(ngModel)]="dateYellow"
                        (ionChange)="minDate = dateYellow;dateExp = dateYellow;"></ion-datetime>
        </ion-item>
        <ion-item>
          {{dateExp}}
          <ion-label>วันหมดอายุ :</ion-label>
          <ion-datetime #red displayFormat="DD/MM/YYYY HH:mm" [min]="minDate" max="2050"
                        [(ngModel)]="dateExp"></ion-datetime>
        </ion-item>
      </ion-col>
      <ion-col col-12>
        <button ion-button class="btn-login" style="width: 100%;" type="submit" (click)="addForm()" id="btn" *ngIf="method == 1">บันทึก
        </button>
        <button ion-button class="btn-login" style="width: 100%;" type="submit" (click)="addForm()" *ngIf="method == 0">
          บันทึกการแก้ไข
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
